<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VoxServe Playground</title>
    <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>VoxServe Playground</h1>
            <div id="server-indicator" class="status-indicator status-stopped">
                <span class="status-dot"></span>
                <span class="status-text">Server Stopped</span>
            </div>
        </header>

        <!-- Server Controls Section -->
        <section class="card" id="server-controls">
            <h2>Server Controls</h2>

            <div class="form-row">
                <div class="form-group">
                    <label for="model-select">Model</label>
                    <select id="model-select">
                        <option value="orpheus">Orpheus-3B</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="port-input">Port</label>
                    <input type="number" id="port-input" value="8000" min="1024" max="65535">
                </div>
            </div>

            <div class="form-group">
                <label>GPUs</label>
                <div id="gpu-checkboxes" class="checkbox-group">
                    <span class="loading-text">Loading GPUs...</span>
                </div>
            </div>

            <details class="advanced-section">
                <summary>Advanced Settings</summary>
                <div class="form-row">
                    <div class="form-group">
                        <label for="batch-size">Max Batch Size</label>
                        <input type="number" id="batch-size" value="8" min="1" max="128">
                    </div>
                    <div class="form-group">
                        <label for="top-p">Top-p</label>
                        <input type="number" id="top-p" step="0.01" min="0" max="1" placeholder="default">
                    </div>
                    <div class="form-group">
                        <label for="top-k">Top-k</label>
                        <input type="number" id="top-k" min="1" placeholder="default">
                    </div>
                    <div class="form-group">
                        <label for="temperature">Temperature</label>
                        <input type="number" id="temperature" step="0.1" min="0" placeholder="default">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="max-tokens">Max Tokens</label>
                        <input type="number" id="max-tokens" min="1" placeholder="default">
                    </div>
                    <div class="form-group checkbox-inline">
                        <input type="checkbox" id="cuda-graph" checked>
                        <label for="cuda-graph">Enable CUDA Graph</label>
                    </div>
                </div>
            </details>

            <div class="button-row">
                <button id="start-server-btn" class="btn btn-primary">Start Server</button>
                <button id="stop-server-btn" class="btn btn-danger" disabled>Stop Server</button>
            </div>

            <div id="server-status" class="status-box">
                <span id="status-message">Ready to start server</span>
            </div>
        </section>

        <!-- Server Logs Section -->
        <section class="card" id="logs-section">
            <div class="logs-header">
                <h2>Server Logs</h2>
                <div class="logs-controls">
                    <label class="checkbox-inline">
                        <input type="checkbox" id="auto-scroll" checked>
                        <span>Auto-scroll</span>
                    </label>
                    <button id="clear-logs-btn" class="btn btn-small btn-secondary">Clear</button>
                </div>
            </div>
            <div id="logs-container" class="logs-container">
                <div class="logs-placeholder">Server logs will appear here when the server is running...</div>
            </div>
        </section>

        <!-- TTS Request Section -->
        <section class="card" id="tts-request">
            <h2>Text-to-Speech</h2>

            <div class="form-group">
                <label for="text-input">Text to Synthesize</label>
                <textarea id="text-input" rows="4" placeholder="Enter text here...">How many stars are there in the sky?</textarea>
            </div>

            <div class="form-group" id="audio-upload-group">
                <label for="audio-input">Reference Audio (optional)</label>
                <input type="file" id="audio-input" accept="audio/*">
                <small class="form-hint">For voice cloning or speech-to-speech models</small>
            </div>

            <!-- Model-specific parameters -->
            <div id="model-params" class="model-params hidden">
                <div class="form-row">
                    <div class="form-group" id="language-group">
                        <label for="language-input">Language</label>
                        <select id="language-input">
                            <option value="">auto</option>
                            <option value="en">English</option>
                            <option value="zh">Chinese</option>
                            <option value="ja">Japanese</option>
                            <option value="ko">Korean</option>
                        </select>
                    </div>
                    <div class="form-group" id="speaker-group">
                        <label for="speaker-input">Speaker</label>
                        <input type="text" id="speaker-input" placeholder="Speaker ID">
                    </div>
                </div>
                <div class="form-group" id="ref-text-group">
                    <label for="ref-text-input">Reference Text</label>
                    <input type="text" id="ref-text-input" placeholder="Text for the reference audio">
                </div>
                <div class="form-group" id="instruct-group">
                    <label for="instruct-input">Instruct</label>
                    <input type="text" id="instruct-input" placeholder="Voice style instructions">
                </div>
            </div>

            <div class="form-row align-center">
                <div class="form-group checkbox-inline">
                    <input type="checkbox" id="streaming-checkbox" checked>
                    <label for="streaming-checkbox">Enable Streaming</label>
                </div>
                <button id="generate-btn" class="btn btn-primary btn-large" disabled>Generate Audio</button>
            </div>
        </section>

        <!-- Audio Player Section -->
        <section class="card" id="audio-player-section">
            <h2>Audio Player</h2>

            <div class="metrics-row">
                <div class="metric">
                    <span class="metric-label">Status</span>
                    <span class="metric-value" id="playback-status">Idle</span>
                </div>
                <div class="metric">
                    <span class="metric-label">TTFA (Network)</span>
                    <span class="metric-value" id="ttfa-network">-</span>
                </div>
                <div class="metric">
                    <span class="metric-label">TTFA (Playback)</span>
                    <span class="metric-value" id="ttfa-playback">-</span>
                </div>
            </div>

            <div class="player-controls">
                <button id="stop-audio-btn" class="btn btn-secondary" disabled>Stop Playback</button>
            </div>
        </section>
    </div>

    <script src="/static/js/audio-player.js"></script>
    <script src="/static/js/main.js"></script>
</body>
</html>
